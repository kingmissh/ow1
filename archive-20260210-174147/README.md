# OW1 - Sync-Link é…ç½®ç®¡ç†

> ğŸ”„ **Sync-Link**: ä¿®æ”¹å³åŒæ­¥ï¼Œå›æ»šå³æ¢å¤  
> **æ ¸å¿ƒç†å¿µ**: ä½ åªéœ€è¦å…³æ³¨ Gitï¼Œé…ç½®è‡ªåŠ¨åŒæ­¥

## âš¡ æè‡´ä½“éªŒï¼ˆä½ çš„éœ€æ±‚å·²å®ç°ï¼‰

### å¼€å‘æ—¶åªç®¡ Git
```bash
# ä¿®æ”¹é…ç½®ï¼ˆé€šè¿‡ä»»æ„å·¥å…·ç•Œé¢ï¼‰
opencode  # ä¿®æ”¹è®¾ç½®...

# æŸ¥çœ‹æ›´æ”¹
save              # åˆ«å: git status .config-store/

# æäº¤æ›´æ”¹
save-commit       # åˆ«å: git add + commit

# æ¨é€
git push
```

### å›æ»šæ—¶åªç®¡ Git Reset
```bash
# é…ç½®æç ¸äº†ï¼Ÿä¸€é”®å›æ»š
reset-config      # åˆ«å: git checkout .config-store/

# æˆ–è€…ç›´æ¥ç”¨ Git
git reset --hard HEAD^   # è½¯é“¾æ¥å®æ—¶åŒæ­¥
```

### æ–°å»ºç¯å¢ƒå…¨è‡ªåŠ¨
```bash
# 1. æ‰“å¼€ Codespace
# 2. init-links.sh è‡ªåŠ¨è¿è¡Œï¼ˆpostCreateCommandï¼‰
# 3. Secrets è‡ªåŠ¨æ³¨å…¥
# 4. åˆ«åè‡ªåŠ¨åŠ è½½ï¼ˆsave, reset-config ç­‰ï¼‰
# âœ… ç¯å¢ƒå°±ç»ªï¼
```

---

## ğŸ“ ç›®å½•ç»“æ„

### å½“å‰æ¶æ„ï¼šä¸­å¿ƒé…ç½®ä»“åº“ + å­æ¨¡å—

```
my-dev-ops/ (ä¸­å¿ƒé…ç½®ä»“åº“)          https://github.com/kingmissh/my-dev-ops
â”œâ”€â”€ scripts/                         # é…ç½®ç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ lib.sh                      # å…±äº«å‡½æ•°åº“
â”‚   â”œâ”€â”€ init-links.sh               # åˆå§‹åŒ–ç¯å¢ƒ
â”‚   â”œâ”€â”€ add-tool.sh                 # æ·»åŠ æ–°å·¥å…·
â”‚   â”œâ”€â”€ save-config.sh              # ä¿å­˜é…ç½®
â”‚   â”œâ”€â”€ reset-config.sh             # å›æ»šé…ç½®
â”‚   â””â”€â”€ ...
â”œâ”€â”€ .config-store/                   # é…ç½®å­˜å‚¨
â”œâ”€â”€ USAGE_SCENARIOS.md              # ä½¿ç”¨åœºæ™¯æŒ‡å—
â””â”€â”€ ...
         â”‚
         â”‚ git submodule
         â–¼
ow1/ (å¼€å‘ä»“åº“)                      https://github.com/kingmissh/ow1
â”œâ”€â”€ .dev-ops/ â†’ my-dev-ops          # â­ å­æ¨¡å—ï¼ˆé…ç½®ç®¡ç†ä¸­å¿ƒï¼‰
â”œâ”€â”€ .gitmodules                      # å­æ¨¡å—é…ç½®
â”œâ”€â”€ src/                            # ä½ çš„å¼€å‘ä»£ç 
â”œâ”€â”€ package.json                    # é¡¹ç›®æ–‡ä»¶
â””â”€â”€ ...
```

**ä¼˜åŠ¿**ï¼š
- âœ… é…ç½®å’Œå¼€å‘ä»£ç å®Œå…¨åˆ†ç¦»
- âœ… å¤šä¸ªé¡¹ç›®å…±äº«åŒä¸€å¥—é…ç½®
- âœ… æäº¤å†å²å¹²å‡€ï¼ˆé…ç½®å’Œä»£ç åˆ†å¼€ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡é…ç½®

```bash
# 1. å®‰è£…å¹¶é…ç½®ä½ çš„å·¥å…·
npm install -g opencode
opencode auth login

# 2. å°†é…ç½®çº³å…¥ Git ç®¡ç†ï¼ˆé€šè¿‡å­æ¨¡å—ï¼‰
cd .dev-ops
./scripts/add-tool.sh opencode .config/opencode

# 3. æäº¤åˆ°ä¸­å¿ƒé…ç½®ä»“åº“
git add .config-store/ && git commit -m "feat: add opencode config"
git push

cd ..  # å›åˆ° ow1
```

### æ—¥å¸¸ä½¿ç”¨

```bash
# ä¿®æ”¹é…ç½®ï¼ˆé€šè¿‡å·¥å…·ç•Œé¢ï¼‰
opencode

# ä¿å­˜åˆ° Gitï¼ˆåœ¨ .dev-ops ç›®å½•ä¸­ï¼‰
cd .dev-ops
save-commit
# æˆ–è€…: ./scripts/save-config.sh

# å›æ»šï¼ˆå¦‚æœæç ¸äº†ï¼‰
reset-config
# æˆ–è€…: ./scripts/reset-config.sh

cd ..  # å›åˆ° ow1
```

### é‡å»ºç¯å¢ƒå

**å…¨è‡ªåŠ¨** - æ— éœ€æ“ä½œï¼š
1. Codespace é‡å»º
2. è‡ªåŠ¨æ‹‰å–å­æ¨¡å— `.dev-ops/`
3. `.dev-ops/scripts/init-links.sh` è‡ªåŠ¨è¿è¡Œ
4. è½¯é“¾æ¥é‡å»º + Secrets æ³¨å…¥ + åˆ«åè®¾ç½®
5. è¿è¡Œ `source ~/.bashrc` åŠ è½½åˆ«å

---

## ğŸ’¡ æ ¸å¿ƒåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Git ä»“åº“ (.config-store/)                            â”‚
â”‚  â”œâ”€ opencode/settings.json  â† ç‰©ç†æ–‡ä»¶               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ è½¯é“¾æ¥ (Symbolic Link)
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç³»ç»Ÿè·¯å¾„ (~/.config/opencode/)                       â”‚
â”‚  â†’ å®é™…æŒ‡å‘ .config-store/opencode/                  â”‚
â”‚  â†’ åº”ç”¨ç¨‹åºæ— æ„ŸçŸ¥ï¼Œå®æ—¶åŒæ­¥                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ä¼˜åŠ¿**:
- ä¿®æ”¹ `~/.config/opencode/` = ä¿®æ”¹ `.config-store/opencode/`
- `git status` ç«‹å³çœ‹åˆ°æ›´æ”¹
- `git reset` ç«‹å³å›æ»šé…ç½®

---

## âŒ¨ï¸ å¿«æ·å‘½ä»¤

è¿è¡Œ `source ~/.bashrc` åå¯ç”¨ï¼š

| å‘½ä»¤ | ä½œç”¨ | Git ç­‰ä»·å‘½ä»¤ |
|------|------|-------------|
| `save` | æŸ¥çœ‹é…ç½®æ›´æ”¹ | `git status .config-store/` |
| `save-commit` | æäº¤é…ç½®æ›´æ”¹ | `git add .config-store/ && git commit` |
| `reset-config` | å›æ»šé…ç½® | `git checkout .config-store/` |
| `check-links` | æ£€æŸ¥è½¯é“¾æ¥çŠ¶æ€ | `ls -la ~/.config/opencode` |
| `config-status` | æŸ¥çœ‹é…ç½®ä»“åº“çŠ¶æ€ | `git status .config-store/` |

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… **æ•æ„Ÿä¿¡æ¯æ’é™¤**: `.gitignore` è¿‡æ»¤ `credentials/`, `identity/`, `*.key`
- âœ… **Secrets æ³¨å…¥**: API Keys é€šè¿‡ GitHub Codespaces Secrets è‡ªåŠ¨æ³¨å…¥
- âœ… **æƒé™é˜²å¾¡**: `chmod 700` ä¿æŠ¤ credentials ç›®å½•ï¼Œ`chmod 600` ä¿æŠ¤å¯†é’¥æ–‡ä»¶
- âœ… **åˆ†æ”¯ç®¡ç†**: å¤šç¯å¢ƒé€šè¿‡ Git åˆ†æ”¯åˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- **[USAGE_SCENARIOS.md](./USAGE_SCENARIOS.md)** - â­ ä½¿ç”¨åœºæ™¯æŒ‡å—ï¼ˆæ¨èå…ˆè¯»ï¼‰
  - 8 ä¸ªè¯¦ç»†ä½¿ç”¨åœºæ™¯
  - å®Œæ•´æ“ä½œæµç¨‹
  - å®é™…å‘½ä»¤è¾“å‡ºç¤ºä¾‹
  - æ•…éšœæ’æŸ¥æŒ‡å—

- **[ENV_SYSTEM_MASTER.md](./ENV_SYSTEM_MASTER.md)** - å®Œæ•´æŠ€æœ¯æ–‡æ¡£
  - ç³»ç»Ÿæ¶æ„è®¾è®¡
  - è„šæœ¬è¯¦ç»†è¯´æ˜
  - æ ‡å‡†æ“ä½œæµç¨‹
  - è·¨è´¦å·è¿ç§»æŒ‡å—
  - æ•…éšœæ’é™¤æ‰‹å†Œ

- **[QUICK_REFERENCE.md](./QUICK_REFERENCE.md)** - å¿«é€Ÿå‘½ä»¤å‚è€ƒ

---

## ğŸ› ï¸ è„šæœ¬è¯´æ˜ï¼ˆåœ¨ .dev-ops/ å­æ¨¡å—ä¸­ï¼‰

### .dev-ops/scripts/init-links.sh
- **ä½œç”¨**: åˆå§‹åŒ–è½¯é“¾æ¥ã€æ³¨å…¥ Secretsã€è®¾ç½®åˆ«å
- **è°ƒç”¨**: è‡ªåŠ¨ï¼ˆpostCreateCommandï¼‰æˆ–æ‰‹åŠ¨
- **ç”¨æ³•**: `bash .dev-ops/scripts/init-links.sh`

### .dev-ops/scripts/add-tool.sh
- **ä½œç”¨**: å°†æ–°å·¥å…·é…ç½®çº³å…¥ Git ç®¡ç†
- **è°ƒç”¨**: æ‰‹åŠ¨ï¼ˆå®‰è£…æ–°å·¥å…·åï¼‰
- **ç”¨æ³•**: `cd .dev-ops && ./scripts/add-tool.sh <å·¥å…·å> <é…ç½®è·¯å¾„>`
- **ç¤ºä¾‹**: `./scripts/add-tool.sh opencode .config/opencode`

### .dev-ops/scripts/save-config.sh
- **ä½œç”¨**: æäº¤é…ç½®æ›´æ”¹åˆ° Gitï¼ˆå®é™…è„šæœ¬ï¼‰
- **ç”¨æ³•**: `cd .dev-ops && ./scripts/save-config.sh [æäº¤ä¿¡æ¯]`

### .dev-ops/scripts/reset-config.sh
- **ä½œç”¨**: å›æ»šé…ç½®æ›´æ”¹ï¼ˆå®é™…è„šæœ¬ï¼‰
- **ç”¨æ³•**: `cd .dev-ops && ./scripts/reset-config.sh`

### ./scripts/migrate-to-submodule.sh
- **ä½œç”¨**: ä»æœ¬åœ°é…ç½®è¿ç§»åˆ°å­æ¨¡å—æ¨¡å¼ï¼ˆä»…åœ¨ ow1 ä¸­ï¼‰
- **ç”¨æ³•**: `./scripts/migrate-to-submodule.sh`

---

## âœ… éªŒè¯ä½ çš„éœ€æ±‚

### éœ€æ±‚ 1: å¼€å‘æ—¶åªå…³æ³¨å½“å‰ä»“åº“ Git
**çŠ¶æ€**: âœ… å·²å®ç°  
**å®ç°æ–¹å¼**: 
- è½¯é“¾æ¥å°†é…ç½®å®æ—¶åŒæ­¥åˆ° `.config-store/`
- `save` åˆ«åæŸ¥çœ‹æ›´æ”¹
- `save-commit` åˆ«åæäº¤æ›´æ”¹

### éœ€æ±‚ 2: å›æ»šæ—¶åªå…³æ³¨ git reset
**çŠ¶æ€**: âœ… å·²å®ç°  
**å®ç°æ–¹å¼**: 
- `reset-config` åˆ«å = `git checkout .config-store/`
- è½¯é“¾æ¥å®æ—¶åŒæ­¥ï¼Œæ— éœ€é‡å¯å·¥å…·

### éœ€æ±‚ 3: å…¶ä»–æ“ä½œè‡ªåŠ¨åŒ–
**çŠ¶æ€**: âœ… å·²å®ç°  
**å®ç°æ–¹å¼**: 
- `init-links.sh` åœ¨ postCreateCommand è‡ªåŠ¨è¿è¡Œ
- Secrets è‡ªåŠ¨æ³¨å…¥
- åˆ«åè‡ªåŠ¨è®¾ç½®

---

**çŠ¶æ€**: ç”Ÿäº§å°±ç»ª âœ…  
**ç‰ˆæœ¬**: v2.0 (Sync-Link ç²¾ç®€ç‰ˆ)
